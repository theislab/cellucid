<p align="center">
  <img src="assets/img/cellucid-logo.svg" alt="Cellucid logo" width="180">
</p>

# Cellucid Web Viewer

Purely static WebGL viewer for 3D UMAP embeddings with interactive coloring, filtering, and centroid overlays. No build step is required to run the site—just a browser and the exported data files.

## What’s in this repo (theislab/cellucid)
- `index.html`: single-page entry that wires the UI to the WebGL canvas.
- `assets/css/`: layout and component styles.
- `assets/js/`: modular JavaScript (no build step):
  - `app/`: entrypoint (`main.js`), UI bindings, and state manager.
  - `rendering/`: WebGL renderer, shaders, density + noise utilities.
  - `data/`: fetch helpers and color palettes.
  - `dev/`: benchmarking + synthetic data helpers.
- `assets/img/`: icons and logos.
- `assets/exports/`: drop your precomputed data assets here before serving.

## Companion Python exporter (theislab/cellucid-data, package name `cellucid`)
The viewer consumes manifest + binary assets generated by the Python package in the companion repo. Generate data with `cellucid.export_data_for_web`, then copy/sync the resulting `exports/` folder into this repo’s `assets/exports/`. See that repo’s README for installation and API details.

## Data the viewer expects
Place these under `assets/exports/`:
- `points_3d.bin` (or `.gz`): float32 XYZ positions (3 values per cell). Required unless other dimensional files provided.
- `points_2d.bin` (or `.gz`): float32 XY positions (2 values per cell). Optional.
- `points_1d.bin` (or `.gz`): float32 X positions (1 value per cell). Optional.
- `dataset_identity.json`: Dataset metadata including available embeddings.
- `obs_manifest.json` plus binaries under `obs/` for per-field values.
- (optional) `var_manifest.json` plus binaries under `var/` for gene expression.
- (optional) `connectivity_manifest.json` plus binaries under `connectivity/` for graph edges.

## Run locally
Serve the directory so module imports and fetch calls resolve, then open the page:

```bash
python -m http.server 8000
open http://localhost:8000/index.html
```

## Hosting tips
- Pre-compress `assets/exports/*` with gzip/Brotli and configure your server to send `Content-Encoding`.
- Keep `assets/exports/` outside of version control; the repo ignores it by default.
- Static hosts that disable directory listings (e.g., GitHub Pages) need a `assets/exports/state-snapshots.json` manifest listing your state files so auto-restore can find them.

## Contributing
This repository is intentionally buildless and self-contained. If you update the UI or rendering code, keep paths rooted under `assets/` and avoid adding runtime build steps so the site stays portable. Data preparation and Python code should live in the companion `theislab/cellucid-data` repository.
